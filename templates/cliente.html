{% extends "base.html" %}
{% block title %}Perfil - DigitalFix{% endblock %}
{% block content %}
<div class="perfil-container">
    <h2>Hola, {{ cliente.nombre }}</h2>
    <div class="perfil-info">
        <p><strong>Correo:</strong> {{ cliente.correo }}</p>
        {% if cliente.telefono %}<p><strong>Teléfono:</strong> {{ cliente.telefono }}</p>{% endif %}
        {% if cliente.direccion %}<p><strong>Dirección:</strong> {{ cliente.direccion }}</p>{% endif %}
    </div>

    <h3>Mis órdenes (Dispositivos)</h3>
    {% if dispositivos %}
        <ul>
            {% for d in dispositivos %}
                <li>{{ d.numero_orden }} — {{ d.modelo }} — Estado: {{ d.get_estado_display }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No tienes órdenes registradas.</p>
    {% endif %}

    <h3>Solicitudes Retiro/Entrega</h3>
    {% if retiros %}
        <ul>
            {% for r in retiros %}
                <li>{{ r.numero_orden }} — {{ r.tipo_servicio }} — {{ r.estado }} — {{ r.fecha_solicitud }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No tienes solicitudes de retiro/entrega.</p>
    {% endif %}

    <h3>Mis Citas</h3>
    {% if citas %}
        <ul>
            {% for c in citas %}
                <li>{{ c.fecha_hora }} — N° cliente: {{ cliente.id }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No tienes citas aún.</p>
    {% endif %}

    <h3>Mensajes enviados</h3>
    {% if mensajes %}
        <ul>
            {% for m in mensajes %}
                <li>{{ m.fecha_envio }} — {{ m.asunto }}</li>
            {% endfor %}
        </ul>
    {% else %}
        <p>No has enviado mensajes.</p>
    {% endif %}

    <div style="text-align:center; margin-top:20px;">
        <a href="{% url 'agendar_cita' %}" class="btn">Agendar una cita</a>
        <a href="{% url 'retiro_entrega' %}" class="btn">Solicitar retiro/entrega</a>
        <a href="{% url 'mensajes' %}" class="btn">Enviar mensaje</a>
    </div>
</div>
{% endblock %}
